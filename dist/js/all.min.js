var fcm=function(){};fcm.prototype.initializeCamera=function(){if(userMedia()){var e={video:!0,audio:!1},t=document.getElementById("v");navigator.getUserMedia(e,function(e){var a=window.URL||window.webkitURL;t.src=a?a.createObjectURL(e):e,t.play(),this.videoPlaying=!0,this.webCamStream=e},function(e){console.log("ERROR"),console.log(e)});document.getElementById("take").addEventListener("click",function(){if(videoPlaying){var e=document.getElementById("canvas");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0);var a=e.toDataURL("image/webp");document.getElementById("photo").setAttribute("src",a)}},!1)}else alert("KO")},fcm.prototype.getUserMedia=function(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||null},fcm.prototype.openModal=function(){var e=document.getElementById("myModal"),t=document.getElementsByClassName("close")[0];e.style.display="block",t.onclick=function(){e.style.display="none"}},fcm.prototype.upload=function(){var e=document.getElementById("canvas"),t=e.toDataURL("image/png"),a=t.replace(/^data:image\/(png|jpg);base64,/,"");$.ajax({url:"localhost:3000/upload",dataType:"json",data:{image:a},type:"POST",success:function(e){console.log("D: "+e)}})};